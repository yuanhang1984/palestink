<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE xml>
<config>
        <dispatch>
                <servlet>
                        <name>uploadTemporaryFile</name>
                        <description><![CDATA[上传临时文件]]></description>
                        <namespace>
                                <![CDATA[
                                        <!-- 调用file_storage模块中的uploadTemporaryFile方法 -->
                                        [custom][file_storage][module.file_storage.necessary.Custom.uploadTemporaryFile][uuid,attachment];
                                ]]>
                        </namespace>
                        <permission>none</permission>
                        <parameters>
                                <parameter>
                                        <name>uuid</name>
                                        <description><![CDATA[文件的uuid]]></description>
                                        <type>string</type>
                                        <format>#constant#</format>
                                        <constant>#uuid</constant>
                                </parameter>
                                <parameter>
                                        <name>attachment</name>
                                        <description><![CDATA[文件（尺寸小于等于30M，类型范围：txt|jpg|gif|png|pdf|zip|rar|doc|docx|xls|xls）]]></description>
                                        <type>file</type>
                                        <format>.+\.(txt|jpg|gif|png|pdf|zip|rar|doc|docx|xls|xlsx)$</format>
                                        <fileMaxSize>30000000</fileMaxSize>
                                        <allowNull>false</allowNull>
                                </parameter>
                        </parameters>
                </servlet>
                <servlet>
                        <name>getFile</name>
                        <description><![CDATA[获取文件]]></description>
                        <namespace>
                                <![CDATA[
                                        <!-- 调用file_storage模块中的downloadFile方法 -->
                                        [custom][file_storage][module.file_storage.necessary.Custom.getFile][uuid,download];
                                ]]>
                        </namespace>
                        <permission>none</permission>
                        <parameters>
                                <parameter>
                                        <name>uuid</name>
                                        <description><![CDATA[文件的uuid]]></description>
                                        <type>string</type>
                                        <format>^[0-9a-zA-Z]{32}$</format>
                                        <allowNull>false</allowNull>
                                </parameter>
                                <parameter>
                                        <name>download</name>
                                        <description><![CDATA[是否下载文件 0 不下载 1下载]]></description>
                                        <type>integer</type>
                                        <format>^[01]$</format>
                                        <allowNull>false</allowNull>
                                </parameter>
                        </parameters>
                </servlet>
                <servlet>
                        <name>getFileInformation</name>
                        <description><![CDATA[获取文件信息]]></description>
                        <namespace>
                                <![CDATA[
                                        <!-- 检查uuid是否有效 -->
                                        [select][file_storage][selectStorageFile][uuid];
                                ]]>
                        </namespace>
                        <permission>none</permission>
                        <parameters>
                                <parameter>
                                        <name>uuid</name>
                                        <description><![CDATA[文件的uuid]]></description>
                                        <type>string</type>
                                        <format>^[0-9a-zA-Z]{32}$</format>
                                        <allowNull>false</allowNull>
                                </parameter>
                        </parameters>
                </servlet>
        </dispatch>
</config>
